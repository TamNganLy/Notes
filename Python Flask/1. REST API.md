# Flask REST API --- Setup & Endpoints Guide

## I. Initial setup a Flask app üèó

### Create the environment

1. Open the terminal
    ``` bash
    python3.13 -m venv .venv
    ```

2. Select the virtual environment interpreter  
    - Press **Ctrl + Shift + P**
    - Search **Python: Select Interpreter**
    - Choose **Python 3.13 (.venv)**

3. Close and re-open the terminal to activate the environment (Ctrl + J)

4. Install the Flask library
    ``` bash
    pip install flask
    ```
    ‚úî Check if the Flask package exists in the `.venv` folder after installation.


### Create `app.py`
  ```python
  from flask import Flask

  app = Flask(__name__)

  stores = [
    {
      "name": "My Store",
      "items": [
        {
          "name": "Chair",
          "price": 15.99
        }
      ]
    }
  ]
  ```
### Run the app

  ``` bash
  flask run
  ```
<br><br>

## II. REST API Endpoint üåê

This follows a simple API documentation structure
-----------------------------------------------------------

### Create a GET route
```python
@app.get("/store") # http://127.0.0.1:5000/store
def get_stores():
  return {"stores": stores}
```

### Create a GET route with dynamic URL
```python
@app.get("/store/<string:name>/item") # http://127.0.0.1:5000/store/<name>
def get_item_in_store(name):
  for store in stores:
    if store["name"] == name:
      return {"item": store["items"]}, 200 
  return {"message": "Store not found."}, 404
```
  It is a good practice to return an object rather than a list, even when returning a single item.

### Create a POST route
```python
from flask import request

@app.post("/store") # http://127.0.0.1:5000/store
def create_store():
  request_data = request.get_json()
  new_store = {"name": request_data["name"], "items": []}
  stores.append(new_store)
  return new_store, 201
```

### Create a POST route with dynamic URL
```python
@app.post("/store/<string:name>/item") # http://127.0.0.1:5000/store/<store_name>/item
def create_item(name):
  request_data = request.get_json()
  for store in stores:
    if store["name"] == name:
      new_item = {"name": request_data["name"], "price": request_data["price"]}
      store["items"].append(new_item)
      return new_item, 201  
  return {"message": "Store not found."}, 404
```